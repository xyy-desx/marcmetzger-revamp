define("@widget/MLS_SEARCH/bs-Component-92ae40db.js",["exports"],(function(e){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},t.apply(this,arguments)}const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=1;t<=6;t++)e.push({label:`${t}+`,id:t});return e};var o=[{name:"city",label:"Location",type:"DROP_DOWN",optionId:"id",optionName:"name",optionData:"cities",fieldName:"ccz=city&city%5B%5D",defaultAllText:"Any"},{name:"propertyType",label:"Type",type:"DROP_DOWN",optionId:"mlsPtID",optionName:"mlsPropertyType",optionData:"propertyTypes",fieldName:"pt",defaultAllText:"Any"},{name:"sortBy",label:"Sort By",type:"DROP_DOWN",optionId:"id",optionName:"sortType",optionData:[{sortType:"Newest",id:"newest"},{sortType:"Oldest",id:"oldest"},{sortType:"Least Expensive to Most",id:"pra"},{sortType:"Most Expensive to Least",id:"prd"},{sortType:"Bedrooms (Low to High)",id:"bda"},{sortType:"Bedrooms (High to Low)",id:"bdd"},{sortType:"Bathrooms (Low to High)",id:"tba"},{sortType:"Bathrooms (High to Low)",id:"tbd"}],fieldName:"srt",lastField:!0},{name:"minBed",label:"Bedrooms",type:"DROP_DOWN",fieldName:"bd",size:"half",order:0,defaultAllText:"Any Number",optionId:"id",optionName:"label",optionData:a([{label:"Studio",id:"0"}])},{name:"minBath",label:"Baths",type:"DROP_DOWN",fieldName:"tb",size:"half",order:1,defaultAllText:"Any Number",optionId:"id",optionName:"label",optionData:a()},{name:"minPrice",label:"Min Price",type:"SINGLE_LINE",fieldName:"lp",size:"half",order:0},{name:"maxPrice",label:"Max Price",type:"SINGLE_LINE",fieldName:"hp",size:"half",order:1}],r=(global.keyMirror||guac.keymirror)({MLS_SEARCH_TITLE_RND:null,MLS_SEARCH_BACKGROUND_RND:null,MLS_SEARCH_FORM_RND:null,MLS_SEARCH_INPUT_BLOCK_RND:null,MLS_SEARCH_INPUT_LABEL_RND:null,MLS_SEARCH_INPUT_TEXT_RND:null,MLS_SEARCH_INPUT_SELECT_RND:null,MLS_SEARCH_FORM_TITLE_RND:null});class l extends(global.React||guac.react).Component{constructor(e){super(e),this._uniqueId=(global._||guac.lodash).uniqueId("mls-input")}render(){const{type:e,size:a,lastField:o,order:l}=this.props,{Block:i,Label:s,Input:n}=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element,p={width:"half"===a?"46.25%":"100%",marginRight:"half"===a&&0===l?"7.5%":"0"},d={block:{paddingBottom:"medium",width:"half"===a?"14.58%":"31.66%",marginRight:o?"0":"2.5%","@xs-only":p,"@sm-only":p},label:{display:"block",marginBottom:"xxsmall"},inputSelect:{fontSize:"93.5%",lineHeight:"normal"},inputText:{fontSize:"93.5%"}};return(global.React||guac.react).createElement(i,{style:d.block,"data-aid":r.MLS_SEARCH_INPUT_BLOCK_RND},(global.React||guac.react).createElement(s,{for:this._uniqueId,children:this.props.labelText,style:d.label,"data-aid":r.MLS_SEARCH_INPUT_LABEL_RND}),"DROP_DOWN"===e&&(global.React||guac.react).createElement(n.Select,t({id:this._uniqueId,tag:"div",style:d.inputSelect,children:this.props.children,"data-aid":r.MLS_SEARCH_INPUT_SELECT_RND},this.props)),"SINGLE_LINE"===e&&(global.React||guac.react).createElement(n,t({id:this._uniqueId,tag:"input",type:"text",style:d.inputText,"data-aid":r.MLS_SEARCH_INPUT_TEXT_RND},this.props)))}}l.propTypes={labelText:(global.PropTypes||guac["prop-types"]).string.isRequired,labelColor:(global.PropTypes||guac["prop-types"]).string,children:(global.PropTypes||guac["prop-types"]).array,type:(global.PropTypes||guac["prop-types"]).string.isRequired,size:(global.PropTypes||guac["prop-types"]).string,lastField:(global.PropTypes||guac["prop-types"]).bool,order:(global.PropTypes||guac["prop-types"]).number},l.defaultProps={labelText:"",labelColor:"highContrast"};class i extends(global.React||guac.react).Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.state={minPrice:"",maxPrice:"",minBed:"",minBath:"",propertyType:"",city:"",fetchError:!1,propertyTypes:[],cities:[],idxUrl:"",sortBy:""}}UNSAFE_componentWillReceiveProps(e){e.apiKey!==this.props.apiKey&&this.fetchFieldData(e.apiKey,e.hasApiKey)}componentDidMount(){this._isMounted=!0,this.fetchFieldData()}componentWillUnmount(){this._isMounted=!1}fetchFieldData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.apiKey;if(!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.hasApiKey))return;const{env:t,websiteId:a,pageId:o,widgetId:r,registeredDomainName:l,domainName:i}=this.props,s=[];e&&s.push(`apiKey=${e}`),l!==i&&s.push("registration=true");const n=s.length?`?${s.join("&")}`:"",p=`https://mls.apps-api.${{local:"dev-godaddy.com",development:"dev-godaddy.com",test:"test-secureserver.net",production:"secureserver.net"}[t]}/v1/data/${a}/${o}/${r}${n}`,d=new XMLHttpRequest;d.open("GET",p,!0),d.send(),d.onreadystatechange=()=>{if(4===d.readyState)if(200===d.status){const e=JSON.parse(d.responseText);this._isMounted&&this.setState({propertyTypes:e.propertyTypes,cities:e.cities,idxUrl:e.systemLinks[0].url,fetchError:!1})}else this._isMounted&&this.setState({fetchError:!0})}}onSubmit(e){e.preventDefault();const t=`${this.state.idxUrl}?${this.generateQueryString()}`;window.open(t,"_self")}generateQueryString(){return o.reduce(((e,t)=>{let a="";const o=this.state[t.name];let r;return o&&(r=""!==e&&"&",a=`${t.fieldName}=${o}`),`${e}${r||""}${a}`}),"")}renderFields(e){return e.map(((e,t)=>{const{label:a,name:o,type:r,size:i,lastField:s,order:n}=e;return"DROP_DOWN"===r?this.renderDropdown(e):(global.React||guac.react).createElement(l,{labelText:a,onChange:this.setValue.bind(this,o),name:a,"data-aid":a,value:this.state[o],key:t,type:r,size:i,lastField:s,order:n})}))}renderDropdown(e){const{name:t,optionData:a,optionId:o,optionName:r,label:i,defaultAllText:s,type:n,size:p,lastField:d,order:c}=e;let g=[];const u=Array.isArray(a)?a:this.state[a];return u.length>0&&(g=u.map(((e,t)=>{const a=(global.React||guac.react).createElement("option",{key:t+1,value:e[o]},e[r]);if(0===t){return[s?(global.React||guac.react).createElement("option",{key:0,value:""},s):(global.React||guac.react).createElement("option",{key:0,disabled:!0,hidden:!0,value:""}),a]}return a}))),(global.React||guac.react).createElement(l,{labelText:i,value:this.state[t],onChange:this.setValue.bind(this,t),children:g,type:n,size:p,lastField:d,order:c})}renderSubmitBtn(){const{renderMode:e}=this.props,t=e!==(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH||!this.state.idxUrl;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{width:"31.3%",display:"flex",alignItems:"center","@xs-only":{width:"100%"},"@sm-only":{width:"100%"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Button.Primary,{tag:"button",type:"submit",value:"Submit",disabled:t,state:t?"disabled":"default",id:"mls-submit",fullWidth:!0},(global.React||guac.react).createElement("div",null,"Search Now")))}setValue(e,t){this.setState({[e]:t.target.value})}render(){const e={headingStyles:{marginBottom:"medium"},form:{width:"100%",paddingVertical:"medium","@sm":{paddingHorizontal:"medium"},"@md":{paddingVertical:"xlarge",paddingHorizontal:"xlarge"}},fieldsContainer:{display:"flex",flexWrap:"wrap"}};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Form,t({category:"neutral",tag:"form",onSubmit:this.onSubmit,style:e.form},this.props),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Minor,{"data-aid":r.MLS_SEARCH_FORM_TITLE_RND,group:"Content",style:e.headingStyles,children:"Search Listings"}),(global.React||guac.react).createElement("div",{style:e.fieldsContainer},this.renderFields(o),this.renderSubmitBtn()))}}i.propTypes={websiteId:(global.PropTypes||guac["prop-types"]).string,pageId:(global.PropTypes||guac["prop-types"]).string,widgetId:(global.PropTypes||guac["prop-types"]).string,env:(global.PropTypes||guac["prop-types"]).string,apiKey:(global.PropTypes||guac["prop-types"]).string,domainName:(global.PropTypes||guac["prop-types"]).string,registeredDomainName:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,hasApiKey:(global.PropTypes||guac["prop-types"]).bool},e.default=i,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-Component-92ae40db.js.map
